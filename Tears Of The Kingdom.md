# 塞尔达传说·王国之泪
这里记录和《塞尔达传说·王国之泪》(以下简称"王泪")相关的游戏内容  
[机制-通天术](#机制-通天术)  
[实体-光亮花](#实体-光亮花)  
[数值-大师之剑](#数值-大师之剑)  
## 机制-通天术
通天术是王泪中林克主动能力之一，其功能为让立刻穿过头上的天花板并从地面~~或者任何东西甚至液体的平面~~上钻出  
实际上通天术对于不同环境有着不同情况的判定，见下图关于通天术的部分专利  
<img src="pics\通天术-1.jpg" alt="通天术" width=50%><img src="pics\通天术-2.png" alt="通天术" width=50%>  

通天术对于林克正上方的天花板有一定要求，只有当天花板和水平面夹角小于指定范围才可激活，角度过大则不满足条件；
上方的天花板需要是一个完整的平面，如果平面高度差过大则不满足激活条件；
对于钻出点，必须是一个可以立足的平面，否则同样不能激活  
天花板高度不能过高，否则无法激活通天术；  
满足条件时光圈为蓝色，不满足条件时光圈为红色  ；
在穿过天花板模型的过程中，若第三人称的摄像机镜头在模型外，则有实时渲染动画；若镜头在模型中，则显示统一过场动画

对此，可以针对通天术进行功能测试

---
| 用例编号 | 测试点 | 测试方法 | 预期结果 |
| :------ | :------ | :------ | :------ |
1|测试天花板角度的可用性-标准|向与水平面夹角**小于30°**的顶面使用通天术| 显示**蓝色**光圈，出现交互信息|
2|测试天花板角度的可用性-角度过大|向与水平面夹角**大于30°**的顶面使用通天术| 显示**红色**光圈，不出现交互信息|
3|测试高度适用性-标准|对高度**小于5个身高单位**的顶面使用通天术|显示蓝色光圈，出现交互信息|
4|测试高度适用性-过高|对高度**大于5个身高单位**的顶面或天空使用通天术|**不显示**蓝色或红色光圈|
5|测试天花板完整性|对不完整的顶面使用通天术|显示**红色**光圈，且只显示高度满足的部分特效|
6|测试钻出点适用性-平面|对预计为可立足点的固体平面的顶面使用通天术|显示**蓝色**光圈，出现交互信息；<br>钻出后站立在该平面|
7|测试钻出点适用性-水体|对预计为**可游泳深度的水体**使用通天术|显示**蓝色**光圈，出现交互信息；<br>钻出后变为**游泳状态**|
8|测试钻出点适用性-岩浆|对预计为**岩浆**的钻出点使用通天术|显示**蓝色**光圈，出现交互信息；<br>钻出后播放掉入岩浆动画，随后复苏在使用通天术前的位置|
9|测试钻出点适用性-不可立足点|对预计为不可立足点(斜面/NPC模型处)使用通天术|显示**红色**光圈，不出现交互信息|
10|测试蓝色光圈交互动作|显示**蓝色**光圈时按下A|播放角色动作，播放音效，角色跳起到天花板，钻入顶面<br>经过数秒后钻出，显示交互信息|
11|测试红色光圈交互动作|显示**红色**光圈时按下A|播放角色动作，无法使用通天术|
12|测试钻出交互-钻出|等待钻出时按下A|角色钻出地面，播放音效|
13|测试钻出交互-返回|等待钻出时按下B|角色钻入下方，经过数秒后回到使用通天术前的位置，播放音效|
14|测试钻出交互-超时|等待钻出时超过**20**秒玩家未按下A或B|执行第12条用例预期结果|
15|激活通天术-正常|按下L键，右摇杆旋转到通天术扇区|进入通天术准备阶段，播放音效，播放动画，镜头转到竖直向上|
16|取消通天术-正常|在准备阶段按下B键|退出通天术准备阶段，镜头转到激活前角度|
17|取消通天术-滑落|在准备阶段站立在角度**大于45°**的斜面|退出通天术准备阶段，镜头转到激活前角度，播放角色滑落动画|
18|取消通天术-坠落|在准备阶段掉下高度**大于1个身高单位**的距离|退出通天术准备阶段，镜头转到激活前角度，播放角色坠落动画|
19|取消通天术-受伤|在准备阶段收到任何单位的伤害|退出通天术准备阶段，镜头转到激活前角度，播放角色受伤动画|
20|取消通天术-生命归零|在准备阶段受到致命伤害使生命值为0|退出通天术准备阶段，播放对应Game Over动画|

---
## 实体-光亮花
**光亮花**是王泪中的一个道具，其**种子**自然生长在地面的洞穴中，玩家可以控制角色采集种子存入背包，或者使用武器/弓箭等冲击种子使其开放，开放后会发出光芒照亮周围区域
以下为光亮花激活方面的相关专利
<img src="pics\光亮花-2.png" alt="通天术" width=50%><img src="pics\光亮花-1.png" alt="通天术" width=50%>  
仅针对光亮花的激活，设计以下测试用例  
|用例编号|测试点|测试步骤|预期结果|
|:-----|:-----|:-----|:-----|
|1|投掷种子|角色按住R键，选择种子，向平面投出|在种子碰撞到平面时消失，在其位置生成一个开放的光亮花|
|2|单个种子-武器|角色使用任何武器打击单个种子|种子消失，在原位置生成一个开放的光亮花|
|3|单个种子-射箭|角色射出无附加种子的箭打击单个种子|箭和种子碰撞时箭停止飞行并掉落，种子消失，在原位置生成一个开放的光亮花|
|4|单个种子-附着箭|角色将种子绑在发射单只箭的弓上并射出|箭和平面碰撞时箭停止飞行并掉落，在碰撞位置生成一个开放的光亮花，种子不掉落|
|5|多个种子-附着箭|角色将种子绑在发射多只箭的弓上并射出|每只箭单独执行用例3预期结果，但箭均不掉落|
|6|多个种子-武器|角色使用任何武器一次性打击多个种子|所有被打击的种子消失，仅在第一个被打击的种子位置生成一个开放的光亮花|
|7|种子-附着森林武器|将种子附着在**森林系**武器上，向平面进行冲击/打击|在冲击位置生成一个开放的光亮花，武器附着种子不消失|
|8|种子-其他武器|将种子附着在**非森林系**武器上，向平面进行冲击/打击|在冲击位置生成一个开放的光亮花，武器附着种子消失|
|9|种子-附着武器投掷|向平面投掷任何附着有种子的武器|不生成光亮花，种子保留|
|10|岩浆碰撞|任何脱手的种子碰触到岩浆面时|种子消失，不生成光亮花|
|11|水体碰撞|任何脱手的种子碰触到水体时|种子掉落，漂浮在水面上，变为可拾取状态，不生成光亮花|
---
## 数值-大师之剑
**大师之剑**是王泪中的一种单手剑类武器，由于其特性，面对不同种类的敌人具有不同的数值特性，也具有多种攻击方式，[相关介绍链接](https://b23.tv/V9mdpGa)具体可分为三类：<br>
- 普通状态 伤害-30 耐久-40
- 半开光状态 伤害-45 耐久-40
- 全开光状态 伤害-60 耐久-无限
> 在玩家附近有瘴气生物时，大师之剑进入半开光状态  
> 在玩家附近有“幻影加农”“加农多夫-第一阶段”“加农多夫-第二阶段”“加农多夫-龙形态”时，大师之剑进入 全开光状态  
> 其余情况大师之剑为普通状态  
> 大师之剑和其余材料进行“余料建造”时，仅增加对应材料攻击力，不额外增加耐久  
角色生命值全满时，按住R键蓄力并松开可以发射剑气，剑气伤害和开光状态有关，剑气飞行距离和角色最大生命值成正比  
大师之剑可反弹来自“加农多夫-第二阶段”的瘴气弹幕并反弹

仅根据以上几种大师之剑的数值变动，设计以下测试用例(不考虑破冰伤害倍率、偷袭伤害倍率等所有武器均有的计算机制)  

|用例编号|测试点|测试步骤|预期结果|
|:------|:-----|:------|:------|
|1|普攻-普通|使用普通状态大师之剑打击目标|造成`30`点伤害，耐久-1|
|2|普攻-半开光|使用半开光状态大师之剑打击目标|造成`45`点伤害，耐久-1|
|3|普攻-全开光|使用全开光状态大师之剑打击目标|造成`60`点伤害，不减少耐久，播放音效，播放特效|
|4|普攻-普通-最后一击|使用剩**1**点耐久的普通状态大师之剑打击目标|造成`30*2=60`点伤害，播放大师之剑破碎效果|
|5|普攻-半开光-最后一击|使用剩余**1**点耐久的半开光状态大师之剑打击目标|造成`45*2=90`点伤害，播放大师之剑破碎效果|
|6|剑气-普通|使用普通状态大师之剑发射剑气|造成`15`点伤害，耐久-1|
|7|剑气-半开光|使用半开光状态大师之剑发射剑气|造成`22`点伤害，耐久-1|
|8|剑气-全开光|使用全开光状态大师之剑发射剑气|造成`30`点伤害，不减少耐久，播放特效|
|9|剑气-无效|在非满生命值状态使用任何状态大师之剑发射剑气|不发射剑气，不消耗耐久|
|10|剑气距离|在生命值为满`n`颗心时发射剑气|剑气发射距离为`n-3`个单位|
|11|瘴气弹幕打击|使用全开光状态大师之剑打击瘴气弹幕|弹幕被反弹，击中加农多夫，造成`15`点伤害|